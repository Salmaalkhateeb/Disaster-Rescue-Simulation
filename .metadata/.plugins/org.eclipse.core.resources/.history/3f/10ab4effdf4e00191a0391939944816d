package model.units;

import java.util.ArrayList;

import simulation.Address;
import model.people.Citizen;
import model.people.CitizenState;

public abstract class PoliceUnit extends Unit {

	private ArrayList<Citizen> passengers;
	private int maxCapacity;
	private int distanceToBase;

	public PoliceUnit(String unitID, Address location, int stepsPerCycle, int maxCapacity) {

		super(unitID, location, stepsPerCycle);
		passengers = new ArrayList<Citizen>();
		this.maxCapacity = maxCapacity;

	}

	public int getDistanceToBase() {
		return distanceToBase;
	}

	public void setDistanceToBase(int distanceToBase) {
		if(distanceToBase<=0){
			this.distanceToBase=0;
		    this.getWorldListener().assignAddress(this, this.getTarget().getLocation().getX(),this.getTarget().getLocation().getY());
		    for(int i=0;i<this.passengers.size();i++){
		    	this.passengers.get(i).setState(CitizenState.RESCUED);
		    }
		    if(this.getState()!=UnitState.IDLE)
		    		this.setState(UnitState.RESPONDING);
		    
		}
		this.distanceToBase = distanceToBase;
	}

	public int getMaxCapacity() {
		return maxCapacity;
	}

}
